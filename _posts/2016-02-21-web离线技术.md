---
layout: post
title: 定位离线和web存储
categories: [语言学习]
tags: [location, 离线web, storage]
---
###获取地理位置

```
void getCurrentPosition(successCallback, errorCallback, options);
其中successCallback是获取位置成功时用户想要调用的函数名
```

###HTML5离线
使用manifest文件来指明离线策略，资源文件有三类
1. CACHE，指定被需要缓存在本地的资源文件。特别注意的是，如果一个页面需要本地缓存时，不需要把页面本身加入cache类型，因为如果一个页面有manifest文件，浏览器会自动对这个页面进行缓存。
2. NETWORK，不进行本地缓存，有网络才能访问
3. FALLBACK:需要指定两个资源文件，一个是能够在线使用的资源文件，另一个是不能在线使用时的本地备用资源文件
4. 指定资源文件，文件路径可以是相对路径，也可以是绝对路径，每个资源本件为独立的一行。

```
CACHE MANIFEST
#文件开头必须是这一句
CACHE:
123.html
myphoto.jpg
NETWORK:
http://www.baiducom/xxx
feifei.php
FALLBACK:
online.js locale.js


<html manifest="123.manifest">
</html>
```

####浏览器网页缓存和本地缓存的区别
1. 浏览器是为了加快网页加载速度，会对每一个打开的网页进行缓存，本地缓存是为了整个web应用程序服务的，只缓存那些指定的网页。
2. 在有网络连接是浏览器缓存，么有网络时会得到错误消息。本地缓存在离线时仍然可以正常访问

####Web存储
1. 本地存储存储在硬盘等待用户读取，Cookies是在服务器上读取（cookie产生时）。
2. 本地存储仅供客户端使用，如果需要服务器端根据存储数值做出反应，则应该使用cookies。
3. 读取本地存储不影响网络带宽，但Cookies会发送到服务器。
4. 本地存储最多5MB，Cookies最多4KB

####在客户端存储数据
1. sessionStorage:针对一个session的数据存储，会话存储。即使同时打开的两个窗口是同一个站点，每个窗口也有独立的存储对象，一旦关闭浏览器，用户会话结束。
2. localStorage：没有时间限制，永久保存，关闭浏览器后不消失

####sessionStorage函数

```
//创建session语法
<script type="text/javascript">
sessionStorage.abc="";
sessionStorage.name="公司";
document.write(sessionStorage.name);
</script>
```

####localStorage函数

```
<script type="text/javascript">
localStorage.abc ="";
</script>
```
可以用来记录访问某个网站的次数