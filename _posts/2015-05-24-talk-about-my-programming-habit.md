---
layout: post
title: 漫谈我的编程习惯
categories: [programming]
tags: [编程, 习惯]
---

<!--
	本篇的读者是谁，最大受益人群是？
	纲领
	1. 引言
	2. 回顾以往经历过的集中模式
	3. 引入最近发现的模式
	4. 启发其他人是否有更好的思路
-->

写这篇文章是总结自己入行这么久的感悟。		
不知道其他程序员怎么思考的，一直以来我都觉得自己不知道如何写程序！虽然也写了一些作品。但是从项目开发到结束的整个周期，我始终觉得自己完全是在摸着石头过河，碰运气刚好写了可以运行的代码。		

仔细想想，可以把自己以往的编码阶段分为4段。	
<br>

1. 先动手后思考	
2. 边动手边思考	
3. 边思考边动手	
4. 先思考后动手	

<br>
###1. 先动手后思考

刚开始入门时候没人带领，很多功能需要摸索着实现，断断续续经历了疯狂的找源码，复制粘贴别人代码的阶段以后，开始自己考虑如何写功能。这个时候最痛苦事情是发现自己无从下手。只能从模仿别人代码开始练起。我想要实现的功能，找到相似的实现以后，自己对照着写下来在思考一遍。	
这个阶段的代码看上去是千奇百怪。只能运行，没有风格。				

###2. 边动手边思考

熬过一段痛苦期开始尝试独立开发功能。进入1个新痛苦期，不知道程序如何设计。从以往的学习模仿经验中，反复的思考，功能怎么写，代码怎么写，复制粘贴自己的代码。运行起来。得不到自己想要的效果，究竟哪里出问题呢？还好当初有大神的指点，学会了**<font color=red>Debug</font>**。利用语言自带的debug功能，一遍又一遍的跟踪查看自己的代码。写到哪里？出了什么问题？然后进行打补丁。针对各种逻辑分支进行单独处理。	
这个阶段的代码看上去和第一阶段类似，一般都是1个万能方法处理一切。不过开始有章法，有自己的代码风格。	

###3. 边思考边动手

随着调试功能用的越来越熟练，个人在写程序过程中慢慢对调试产生了依赖。感觉写程序的效率越来越高，刷刷刷写完，开启**Debug**模式，跟踪查看是否每步都是我想要的结果，如果不是，关闭调试器，修改与预期不符合的代码段逻辑。		
不过时间长了，心里甚是恐慌，没了调试器，我基本上就写不了程序。慢慢的在写程序的时候去思考程序的内在逻辑，代码应该怎么写，在开启调试器之前，先在内心对代码逻辑运行一次，然后再启动调试器大段大段的在我不确定的地方进行调试。		
这个阶段的代码开始优美起来，会有注释，对具体的运算进行封装。根据需要拆分方法和对象，不过依然不干净。	


###4. 先思考后动手

这个阶段是现在正在刻意训练的阶段。经过对过往习惯总结和对程序设计的进一步学习。开始明白设计应该先于代码。很多不好的代码是在开始设计时候思考的时间太少。在逻辑不严谨的情况下匆匆完成，看似很快完成，但是牺牲了后续的可维护性。只能对各种漏洞进行打补丁，下一轮在补丁上进行补丁，直到代码变得很难维护。		
那么先思考后动手究竟应该怎么做呢？我想很多人都知道这个概念，但是确不知道如何落地这个过程。在这我先抛砖引玉说下我的看法。	

首先要把思考这个过程拆分为2个过程。

1. 思考业务
2. 思考代码逻辑

#### 4.1 思考业务

不能解决实际问题的代码，是没有价值的代码，不值得考虑的。在编写代码之前，我们首先要确认明白业务的内在逻辑。	
明白业务的内在逻辑说的更简单1点。	
就是要沟通思考，业务的执行顺序和执行过程中的输入变量和输出产物。然后还有极限边界处理和相关的隐变量（沟通过程中没有明确，但是业务要执行必须要考虑的，类是几何图形辅助线）。		

在确认业务逻辑从开始获取输入输出，到产出指定产物这个流程明白以后，业务上的思考算结算。		

#### 4.2 思考代码逻辑

代码写了多了以后我们会发现，1个万能的方法就足够满足业务的需要，只要按照业务的逻辑写完肯定是没问题的。这也是前面几个阶段在做的事情。	
但是实际情况确实，通常情况下，这个万能方法会因为权限太大，1个人干了所有的事情，导致这个方法发点小脾气，我们也无可奈何，任何和它的沟通都需要极大的成本才能妥协得到想要的结果。		
结果就是，它会变成巨无霸。当然它不是麦当那个巨无霸，它是在代码中巨无霸，和其他代码相比，它太大了。大到任何人看到它都会恐惧。		
另外1个情况就是我们会发现整个项目中，到处都是类似的代码存在。对业务的微小改动，对代码的改动可能是多处的。改的不好一群巨无霸会发脾气的。想想绿巨人给雷神来的一拳。		

那么什么样的代码逻辑是比较好的逻辑呢？		
这里要推荐大家学习下函数式编程。函数式变成好处多多。巴拉巴拉。。。		经过学习我发现函数或方法大部分时候。他们的内在逻辑是这样的(android版微信建议点击左下角原网页查看代码)：

```text
	函数定义（参数1， 参数2， 参数3。。。）
		过滤非法参数
		处理参数
		返回值 = 其他函数（处理后参数） 
		处理返回值
		返回 返回值

	其他函数（参数1， 参数2， 参数3。。。）
		过滤非法参数
		处理参数
		返回值 = 其他函数（处理后参数） 
		处理返回值
		返回 返回值
```

看到没有，上面的方法很像递归的思考过程。	
顺着这个思路进一步思考。	

1个业务上逻辑可以通过以上的思路进行拆分。每一个方法内部只负责处理当前阶段的的逻辑。如果涉及到运算或极限处理，"递归"的新建另外1个函数来处理。最后最底层的函数基本上只负责：	

1. 极限处理	
2. 逻辑运算	
3. 异常过滤	

而在它上层的各层方法都对返回值进行严格过滤。确保逻辑上的严谨。		

依照这样的思路，有意的训练自己的编码过程，发现基本上在代码写完之前我不需要调试。写完以后的调试基本上也在2个地方进行	

1. 书写错误	
2. 底层运算和过滤函数	

这里可能有的朋友会问，良好的设计不是应该考虑设计模式吗？回掉函数呢？	
恭喜你，你是第一个发现问题的。我这里在特别说明下：

**参数1，参数2，参数3。。。**，参数是语言自带变量类型，包括类实例和函数。	

按照这个思路进行训练，发现自己的代码逻辑变得严谨。风格开始一致。每个方法都很短.	

<br>
或许以后我还会有新的发现，新的思路，不过到现阶段，我终于觉得我会写代码了。这让我很欣慰。	

不知道我的这篇文章对大家是否有所启发？		
如果有更好的思路也希望能整理出来大家一起交流。	









