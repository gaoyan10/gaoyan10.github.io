---
layout: post
title: Android的点点滴滴记录
categories: [沧海遗珠]
tags: [android, 记录]
---

####onWindowFocusChanged

[CSDN](http://blog.csdn.net/pi9nc/article/details/9237031)

程序真的可见时，会调用onWindowFocusChanged,从这时候起，用户可以与应用程序进行交互了。<br>
下面的测试是以Android 5.1.1,坚果手机为例，不同的版本，不同的定制系统可能略有不同。

这是一个Activity从进入到退出的过程。

1. com.yan.legacy.MainActivity: onCreate
2. com.yan.legacy.MainActivity: onStart
3. com.yan.legacy.MainActivity: onResume
4. com.yan.legacy.MainActivity: attachedToWindow
5. com.yan.legacy.MainActivity: onWindowFocusChanged
6. 程序运行
6. com.yan.legacy.MainActivity: onWindowFocusChanged
7. com.yan.legacy.MainActivity: onPause
8. com.yan.legacy.MainActivity: onStop
9. com.yan.legacy.MainActivity: onDestroy

这是一个Activity从进入到进入下一个activity到返回自身的过程

1. com.yan.legacy.MainActivity: onCreate
2. com.yan.legacy.MainActivity: onStart
3. com.yan.legacy.MainActivity: onResume
4. com.yan.legacy.MainActivity: attachedToWindow
5. com.yan.legacy.MainActivity: onWindowFocusChanged
6. 程序运行
7. 点击一个按钮进入下一个activity
6. com.yan.legacy.MainActivity: onPause
7. com.yan.legacy.MainActivity: onWindowFocusChanged
8. com.yan.legacy.MainActivity: onStop
9. 返回自身
9. com.yan.legacy.MainActivity: onRestart
10. com.yan.legacy.MainActivity: onStart
11. com.yan.legacy.MainActivity: onResume
12. com.yan.legacy.MainActivity: onWindowFocusChanged

下面是一个activity从进入到锁屏经历的声明周期

1. com.yan.legacy.MainActivity: onCreate
2. com.yan.legacy.MainActivity: onStart
3. com.yan.legacy.MainActivity: onResume
4. com.yan.legacy.MainActivity: attachedToWindow
5. com.yan.legacy.MainActivity: onWindowFocusChanged
6. 程序运行
7. 锁屏
6. com.yan.legacy.MainActivity: onPause
7. com.yan.legacy.MainActivity: onStop
8. com.yan.legacy.MainActivity: onWindowFocusChanged
9. 开锁
10. com.yan.legacy.MainActivity: onRestart
11. com.yan.legacy.MainActivity: onStart
12. com.yan.legacy.MainActivity: onResume
13. com.yan.legacy.MainActivity: onWindowFocusChanged


下面是一个activity从进入到按Home退回桌面，然后再进入的过程

1. com.yan.legacy.MainActivity: onCreate
2. com.yan.legacy.MainActivity: onStart
3. com.yan.legacy.MainActivity: onResume
4. com.yan.legacy.MainActivity: attachedToWindow
5. com.yan.legacy.MainActivity: onWindowFocusChanged
6. 程序运行
7. 按Home
6. com.yan.legacy.MainActivity: onPause
7. com.yan.legacy.MainActivity: onWindowFocusChanged
8. com.yan.legacy.MainActivity: onStop
9. 再次进入
9. com.yan.legacy.MainActivity: onRestart
10. com.yan.legacy.MainActivity: onStart
11. com.yan.legacy.MainActivity: onResume
12. com.yan.legacy.MainActivity: onWindowFocusChanged

与进入下一个activity相同，与锁屏唯一不同的是onWindowFocusChanged，可能是因为桌面更早的获得了焦点。

弹出一个Dialog，Activity仍可见时如下

1. com.yan.legacy.MainActivity: onCreate
2. com.yan.legacy.MainActivity: onStart
3. com.yan.legacy.MainActivity: onResume
4. com.yan.legacy.MainActivity: attachedToWindow
5. com.yan.legacy.MainActivity: onWindowFocusChanged
6. 程序运行
6. 弹窗出来
6. com.yan.legacy.MainActivity: onWindowFocusChanged

下面是一个activity从进入到弹出一个Theme为Dialog的Activity时的过程

1. com.yan.legacy.MainActivity: onCreate
2. com.yan.legacy.MainActivity: onStart
3. com.yan.legacy.MainActivity: onResume
4. com.yan.legacy.MainActivity: attachedToWindow
5. com.yan.legacy.MainActivity: onWindowFocusChanged
6. 程序运行
7. 弹出Dialog样式的Activity
6. com.yan.legacy.MainActivity: onPause
7. com.yan.legacy.MainActivity: onWindowFocusChanged
8. 返回
8. com.yan.legacy.MainActivity: onResume
9. com.yan.legacy.MainActivity: onWindowFocusChanged
