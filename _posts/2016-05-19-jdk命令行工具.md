---
layout: post
title: 深入理解Java虚拟机——虚拟机性能监控与故障处理工具和案例分析
categories: [阅读笔记]
tags: [jvm,虚拟机, 性能监控]
---

### JDK命令行工具

1. jps， JVM Process Status Tool，显示指定系统内所有的HotSpot虚拟机进程
2. jstat, JVM Statistics Monitoring Tool， 用于收集HotSpot虚拟机各方面的运行数据
3. jinfo， Configuration Info for java，显示虚拟机配置信息
4. jmap，Memory Map for Java，生成虚拟机的内存转储快照（heapdump）
5. jhat, JVM Heap Dump Browser， 用于分析heapdump文件，会建立一个http/html服务器，让用户可以在浏览器查看分析结果
6. jstack, Stack Trace for Java，显示虚拟机的线程快照

### HSDIS，JIT生成代码反编译

能够把动态生成的本地代码还原为汇编代码输出，同时还生成了大量非常有价值的注释。

根据操作系统类型和CPU类型下插件到jre/bin/client和jre/bin/server目录。

### JDK的可视化工具

JConsole，可以用来查看JVM进程、线程。

VisualVM，需要安装插件，在jvmhome/bin目录下的jvirtualvm

**Direct Memory，直接内存，分配不会在堆里，JNI代码调用了本地库，使用的内存也不在堆里**

### 外部命令导致系统缓慢

比如Runtime.getRuntime().exec()。Java执行这个过程如下：
首先clone一个和当前虚拟机拥有一样环境变量的进程，再用这个进程去执行外部命令，最后退出这个进程。频繁调用，CPU和内存负担都很大。